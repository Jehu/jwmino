<html xmlns:ng="http://angularjs.org" xmlns:ngm="http://jqm-angularjs.org">
<head>
    <title>JWMiNo - Ministry notes</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="stylesheet" href="lib/iui/iui.css" type="text/css">
    <link rel="stylesheet" href="lib/iui/t/default/default-theme.css" type="text/css">
    <!--link rel="stylesheet" href="lib/iui/ext-sandbox/t/defaulthd/defaulthd-theme.css" type="text/css"-->
    <!--link rel="stylesheet" href="lib/iui/ext-sandbox/t/webos/webos-theme.css" type="text/css"-->
    <link rel="stylesheet" href="css/main.css" type="text/css" />
    <script src="i18n/de_DE.js" type="application/javascript"></script>
    <script src="lib/moment.min.js" type="application/javascript"></script>
    <script src="lib/sprintf-0.7-beta1.js" type="application/javascript"></script>
    <script src="lib/angular-0.9.19.min.js" type="application/javascript"  ng:autobind></script>
    <script src="js/filter.i18n.js" type="application/javascript"></script>
    <script src="js/filter.moment.js" type="application/javascript"></script>
    <script src="lib/persistence.js" type="application/javascript"></script>
    <script src="lib/persistence.store.sql.js" type="application/javascript"></script>
    <script src="lib/persistence.store.websql.js" type="application/javascript"></script>
    <script src="js/model.js" type="application/javascript"></script>
    <script src="js/app.js" type="application/javascript"></script>
    <script src="lib/iui/iui.js"></script>

</head>
<body ng:controller="JwminoController">

        <div class="toolbar">
            <h1 id="pageTitle"></h1>
            <a id="backButton" class="button" href="#"></a>
            <ng:include src="tbButtons"></ng:include>
        </div>

        <!-- PANEL territories -->
        <ul title="{{'Territories'|i18n}}" class="panel" id="territories" selected="true">
            <li ng:repeat="territory in territories">
                <a href="#streets" ng:click="[setCurTerritory(territory), refreshStreets()]">{{territory.ident}} <span ng:show="territory.city">({{territory.city}})</span></a>
            </li>
        </ul>

        <!-- PANEL streets -->
        <ul class="panel" id="streets" title="{{curTerritory.ident}} {{curTerritory.city}}">
                <li ng:repeat="street in streets">
                    <a href="#notes"  ng:click="[ setCurStreet(street), refreshAddresses($parent.addressFilter)]">{{street.name}}</a>
                </li>
        </ul>

        <!-- PANEL notes -->
        <ul id="notes" class="panel listview-splitbtn" title="{{curStreet.name}}">
            <li ng:repeat="address in addresses">
                <a href="#visits"  ng:click="setCurAddress(address)">
                    <span class="icon home">#{{address.housenumber|number}}<span ng:show="address.info"> {{address.info}}</span>, {{address.name}} <span ng:show="address.gender != 'na'" class="icon gender {{address.gender}}"></span></span>
                    <p ng:show="address.the_visits[0].date">
                        {{address.the_visits[0].date|moment}}:
                        <span ng:hide="address.the_visits[0].type == 'normal'"> {{address.the_visits[0].type|i18n}}</span>
                        <span ng:show="address.the_visits[0].note"> {{address.the_visits[0].note}}</span>
                    </p>
                </a>
                <a href="#edit-visit" class="icon comment-add" ngm:click="[ setCurAddress(address), resetCurVisit() ]">{{'Add visit'|i18n}}</a>
            </li>
        </ul>


        <!-- PANEL addressFilter -->
        <form id="address-filter" title="{{'Filter'|i18n}}" class="panel">
            <fieldset>
                <div class="row">
                    <label for="filter-all">{{'All'|i18n}}</label>
                    <input type="radio" id="filter-all" name="addressFilter" value="all" ng:click="refreshAddresses(null)" onclick="iui.showPageById('notes')" />
                </div>

                <div class="row">
                    <label for="filter-nh">{{'NH'|i18n}}</label>
                    <input type="radio" id="filter-nh" name="addressFilter" value="nh" ng:click="refreshAddresses('nh')" onclick="iui.showPageById('notes')" />
                </div>

                <div class="row">
                    <label for="filter-rv">{{'Return visit'|i18n}}</label>
                    <input type="radio" id="filter-rv" name="addressFilter" value="return_visit" ng:click="refreshAddresses('return_visit')" onclick="iui.showPageById('notes')" />
                </div>

                <div class="row">
                    <label for="filter-study">{{'Study'|i18n}}</label>
                    <input type="radio" id="filter-study" name="addressFilter" value="study" ng:click="refreshAddresses('study')" onclick="iui.showPageById('notes')" />
                </div>

                <div class="row">
                    <label for="filter-foreigner">{{'Foreign lang.'|i18n}}</label>
                    <input type="radio" id="filter-foreigner" name="addressFilter" value="foreign_language" ng:click="refreshAddresses('foreign_language')" onclick="iui.showPageById('notes')" />
                </div>
            </fieldset>
        </form>

        <!--div id="footer">
            <a href=#" class="button">Bla</a>
        </div-->
</body>
</html>
